<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css" />
<script src="prototype.js" type="text/javascript"></script>
<script type="text/javascript">
function heartbeat(id) {	
 	var status
 	var freq = Math.floor(Math.random() * 10) + 10  	
 	new Ajax.PeriodicalUpdater('','http://localhost:8080/heartbeat', {
        method: 'get', frequency: freq, 
        onCreate: function(response) {
        	if (status == null) { 
        		$(id).update('<img src="spinner.gif"/>');         			
        	} else if (status.status == 'success') {
        		$(id).update('<img src="running_green.gif"/>');
        	} else { 
        		$(id).update('<img src="running_red.gif"/>');
        	}
        },
        onSuccess: function(response) {
            setTimeout(function () {
            	status = response.responseText.evalJSON()
           	 	$(id).update('<img src="' + status.status + '.png" title="' + status.code + '"/>'); 
            }, 750);        	        	
        }
     });
}
</script>
</head>

<!-- <body onload="heartbeat('A')"> -->
<body onload="heartbeat('A');heartbeat('B');heartbeat('C');heartbeat('D');heartbeat('E');heartbeat('F');heartbeat('G');heartbeat('H');heartbeat('I');heartbeat('J');heartbeat('K');heartbeat('L');heartbeat('M');heartbeat('N');heartbeat('O');heartbeat('P');heartbeat('Q');heartbeat('R');heartbeat('S');heartbeat('T');heartbeat('U');">
<h2>Modules</h2>
<ul>
<li><div id="A"><img src="spinner.gif"/></div></li>
<li><div id="B"><img src="spinner.gif"/></div></li>
<li><div id="C"><img src="spinner.gif"/></div></li>
<li><div id="D"><img src="spinner.gif"/></div></li>
<li><div id="E"><img src="spinner.gif"/></div></li>
<li><div id="F"><img src="spinner.gif"/></div></li>
<li><div id="G"><img src="spinner.gif"/></div></li>
<li><div id="H"><img src="spinner.gif"/></div></li>
<li><div id="I"><img src="spinner.gif"/></div></li>
<li><div id="J"><img src="spinner.gif"/></div></li>
<li><div id="K"><img src="spinner.gif"/></div></li>
<li><div id="L"><img src="spinner.gif"/></div></li>
<li><div id="M"><img src="spinner.gif"/></div></li>
<li><div id="N"><img src="spinner.gif"/></div></li>
<li><div id="O"><img src="spinner.gif"/></div></li>
<li><div id="P"><img src="spinner.gif"/></div></li>
<li><div id="Q"><img src="spinner.gif"/></div></li>
<li><div id="R"><img src="spinner.gif"/></div></li>
<li><div id="S"><img src="spinner.gif"/></div></li>
<li><div id="T"><img src="spinner.gif"/></div></li>
<li><div id="U"><img src="spinner.gif"/></div></li>
</ul>
</body>
</html>